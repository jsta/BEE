# Sample CWL Workflow Files and Parsing Codes

This repository contains some (simple) sample CWL workflow files. Additionally,
there is some Python code, using the auto-generated CWL parser
(`parser_v1_0.py`) to explore the CWL files and potentially populate a databse
based on the results of parsing the workflow.

## Install Dependency

> **NOTE:** You don't need to do this is you're in a BEE development
> environment. Just make sure to do a `poetry update`.

Please install the Python parsing code using Poetry (make sure you're in an
active virtual environment for BEE).

```sh
$ poetry add -D cwl-utils cwltool
```

## Read the Parser's Documentation

Start a Python shell, load the parsing library, and explore the code's
documentation:

```sh
$ python       # 3.6 or greater
>>> import cwl_utils.parser_v1_0 as cwl
>>> top = cwl.load_document("./grepcount/grep-and-count.cwl")
INFO:rdflib:RDFLib Version: 4.2.2
>>> help(cwl)
Help on module cwl_utils.parser_v1_0 in cwl_utils:

NAME
    cwl_utils.parser_v1_0

DESCRIPTION
    # This file was autogenerated using schema-salad-tool --codegen=python
    # The code itself is released under the Apache 2.0 license and the help text is
    # subject to the license of the original schema.
    #

CLASSES
    builtins.Exception(builtins.BaseException)
        ValidationException
    builtins.object
...
```

All the usual Python exploration tools are useful as well (e.g. `vars`, `dir`,
etc.).

## Run the Sample Parser

To test the parser on a CWL file:

```sh
$ ./dump_cwl.py ./grepcount/grep-and-count.cwl
$ ./dump_cwl.py $ ./dump_cwl.py ./grepcount/grep-and-count.cwl
```

## References

- [`cwl-utils` repository](https://github.com/common-workflow-language/cwl-utils)

